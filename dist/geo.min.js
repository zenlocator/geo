!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):t.Geo=s()}(this,function(){"use strict";var t=function(t,s,n){var r=0;switch(t=parseInt(t,10),s=s.toUpperCase(),n=n.toUpperCase(),s){case this.distanceUnits.KILOMETERS:r=1e3*t;break;case this.distanceUnits.METERS:r=t;break;case this.distanceUnits.LEAGUES:r=5556*t;break;case this.distanceUnits.MILES:r=1609.344*t;break;case this.distanceUnits.YARDS:r=t/1.0936;break;case this.distanceUnits.FEET:r=.3048*t;break;case this.distanceUnits.INCHES:r=.0254*t;break;case this.distanceUnits.NAUTICAL_MILES:r=1852*t;break;case this.distanceUnits.SHEPPEYS:r=t/.00071428571}return this.formatDistance(r,n)},s=function(t){if("number"==typeof t)return this.coordFormats.D;if("string"==typeof t){var s=t.match(/[+-]?\d+(\.\d+)?/g);if(s){if(3===s.length)return this.coordFormats.DMS;if(2===s.length)return this.coordFormats.DM;if(1===s.length)return-1===t.indexOf("째")?this.coordFormats.D:this.coordFormats.DD}}},n=function(t){var s={sw:0,nw:0,ne:0,se:0};if(this.isArray(t)&&2===t.length)s.sw=this.formatCoords({lat:t[0].lat,lng:t[0].lng}),s.ne=this.formatCoords({lat:t[1].lat,lng:t[1].lng});else{if(!this.isPlainObject(t)||2!==Object.keys(t).length)return;var n=Object.keys(t);s.sw=this.formatCoords({lat:t[n[0]].lat,lng:t[n[0]].lng}),s.ne=this.formatCoords({lat:t[n[1]].lat,lng:t[n[1]].lng})}if(this.parseCoord(s.ne.lat)<this.parseCoord(s.sw.lat)||this.parseCoord(s.ne.lng)<this.parseCoord(s.sw.lng)){var r=[s.ne,s.sw];s.sw=r[0],s.ne=r[1]}return s.nw=this.formatCoords({lat:s.sw.lat,lng:s.ne.lng}),s.se=this.formatCoords({lat:s.ne.lat,lng:s.sw.lng}),s},r=function(t){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===t)return t;var n=[],r=void 0,i=void 0,o=void 0;if(t=this.parseCoord(t,!1),this.settings.coordsFormat===this.coordFormats.D)return parseFloat(t.toFixed(this.settings.coordsPrecision));if(this.settings.coordsFormat===this.coordFormats.DM?r=1:this.settings.coordsFormat===this.coordFormats.DMS&&(r=2),r)for(var e=0;e!==r;e++)n.push(parseInt(t,10)),i=t%1,t=60*i;return n.push(parseFloat(t.toFixed(this.settings.coordsPrecision))),o=s?n[0]>0?"N":"S":n[0]>0?"E":"W",n=n.map(function(t){return Math.abs(t)}),n=3===n.length?n[0]+"째 "+n[1]+"' "+n[2]+'" '+o:2===n.length?n[0]+"째 "+n[1]+"' "+o:1===n.length?n[0]+"째 "+o:void 0},i=function(t){return t={lat:this.parseCoord(t.lat,!0),lng:this.parseCoord(t.lng,!1)},(0===t.lat&&-180===t.lng||0===t.lat&&180===t.lng)&&(t.lng=0),{lat:this.formatCoord(t.lat),lng:this.formatCoord(t.lng)}},o=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.settings.distanceUnits,n=parseFloat(t),r=void 0;switch(s){case this.distanceUnits.KILOMETERS:n*=.001,r=n<1?2:1;break;case this.distanceUnits.LEAGUES:n*=179986e-9,r=1;break;case this.distanceUnits.MILES:n*=621371e-9,r=n<1?2:1;break;case this.distanceUnits.YARDS:n*=1.09361,r=0;break;case this.distanceUnits.FEET:n*=3.28084,r=0;break;case this.distanceUnits.INCHES:n*=39.3701,r=0;break;case this.distanceUnits.NAUTICAL_MILES:n*=539957e-9,r=n<1?2:1;break;case this.distanceUnits.SHEPPEYS:n*=.00071428571,r=2}return this.settings.distancePrecision!==this.FLEXIBLE_DISTANCE_PRECISION&&(r=this.settings.distancePrecision),parseFloat(n.toFixed(r))},e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){if(1===t.length)return this.formatCoords({lat:t[0].lat,lng:t[0].lng});for(var s=0,n=0,r=0,i=void 0,o=void 0,e=0;e!==t.length;e++){var a=t[e];i=this.toRad(this.parseCoord(a.lat)),o=this.toRad(this.parseCoord(a.lng)),s+=Math.cos(i)*Math.cos(o),n+=Math.cos(i)*Math.sin(o),r+=Math.sin(i)}var h=t.length;s/=h,n/=h,r/=h,o=Math.atan2(n,s);var c=Math.sqrt(s*s+n*n);return i=Math.atan2(r,c),this.formatCoords({lat:180*i/Math.PI,lng:180*o/Math.PI})}},a=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=void 0,r=this.orderByDistance(t,s);return r.length&&(n=r[0]),n},h=function(t,s,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.RADIUS_EQUILATERAL,i=this.parseCoord(t.lat,!0),o=this.parseCoord(t.lng,!1),e=Number(s)/r,a=this.toRad(Number(n)),h=this.toRad(Number(i)),c=this.toRad(Number(o)),l=Math.asin(Math.sin(h)*Math.cos(e)+Math.cos(h)*Math.sin(e)*Math.cos(a)),d=c+Math.atan2(Math.sin(a)*Math.sin(e)*Math.cos(h),Math.cos(e)-Math.sin(h)*Math.sin(l));return d=(d+3*Math.PI)%(2*Math.PI)-Math.PI,this.formatCoords({lat:this.toDeg(l),lng:this.toDeg(d)})},c=function(t,s){var n=function(t){return t*(Math.PI/180)},r=this.parseCoord(t.lat,!0),i=this.parseCoord(t.lng,!1),o=this.parseCoord(s.lat,!0),e=this.parseCoord(s.lng,!1),a=n(o-r),h=n(e-i),c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n(r))*Math.cos(n(o))*Math.sin(h/2)*Math.sin(h/2);return this.formatDistance(12742e3*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},l=function(t,s){return t={lat:this.parseCoord(t.lat),lng:this.parseCoord(t.lng)},s=this.parseBounds(s),t.lat>=s.nw.lat&&t.lat<=s.ne.lat&&t.lng>=s.sw.lng&&t.lng<=s.nw.lng},d=function(t,s,n){var r=this.settings.distanceUnits;this.settings.distanceUnits=this.distanceUnits.METER;var i=this.getDistance(t,s)<=n;return this.settings.distanceUnits=r,i},f=function(t){return(t=this.parseCoord(t))>=-90&&t<=90},u=function(t){return(t=this.parseCoord(t))>=-180&&t<=180},g=function(t,s){var n=this;if(this.isPlainObject(s)||this.isArray(s)){var r=this.isArray(s)?[]:{},i=[],o=[],e=function(s,r){var e={};r&&(e.key=r),e.value=s,e.distance=n.getDistance(t,s),i.push(e),o.push(e.distance)};if(this.isArray(s)){var a=!0,h=!1,c=void 0;try{for(var l,d=s[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){e(l.value)}}catch(t){h=!0,c=t}finally{try{!a&&d.return&&d.return()}finally{if(h)throw c}}}else for(var f in s)e(s[f],f);o.sort(function(t,s){return t-s});for(var u in o)!function(t){var s=i.filter(function(s){if(s.distance===o[t])return s});for(var n in s){var e=s[n];e.hasOwnProperty("key")?r[e.key]=e.value:r.push(e.value)}}(u);return r}},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E=function(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")},M=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(t){return t=M({},this.formatBounds(t)),t&&(t={sw:{lat:this.parseCoord(t.sw.lat),lng:this.parseCoord(t.sw.lng)},nw:{lat:this.parseCoord(t.nw.lat),lng:this.parseCoord(t.nw.lng)},ne:{lat:this.parseCoord(t.ne.lat),lng:this.parseCoord(t.ne.lng)},se:{lat:this.parseCoord(t.se.lat),lng:this.parseCoord(t.se.lng)}}),t},C=function(t){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.detectCoordFormat(t),r=[],i=void 0;if(n)if(n===this.coordFormats.D)i=parseFloat(t);else{if("string"==typeof t&&(t=t.toLowerCase(),r=t.match(/[+-]?\d+(\.\d+)?/g).map(function(t){return parseFloat(t)})),(1===r.length&&n!==this.coordFormats.DD||2===r.length&&n!==this.coordFormats.DM||3===r.length&&n!==this.coordFormats.DMS||r.length<1||r.length>3)&&(r=[]),r.length){var o=0,e=!0,a=!1,h=void 0;try{for(var c,l=r.reverse()[Symbol.iterator]();!(e=(c=l.next()).done);e=!0)i=c.value,i+=o,o=i/60}catch(t){a=!0,h=t}finally{try{!e&&l.return&&l.return()}finally{if(a)throw h}}}!i||"string"!=typeof t||-1===t.indexOf("s")&&-1===t.indexOf("w")||(i*=-1)}return i&&s&&(i=parseFloat(i.toFixed(this.settings.coordsPrecision))),i},m=Object.freeze({convertDistance:t,detectCoordFormat:s,formatBounds:n,formatCoord:r,formatCoords:i,formatDistance:o,getCenter:e,getClosest:a,getDestinationPoint:h,getDistance:c,isPointInBounds:l,isPointInCircle:d,isValidLat:f,isValidLng:u,orderByDistance:g,parseBounds:v,parseCoord:C}),S=function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,t);for(var n in s)s.hasOwnProperty(n)&&("string"==typeof s[n]&&(s[n]=s[n].toUpperCase()),-1!==["distancePrecision","coordsPrecision"].indexOf(n)&&(s[n]=parseInt(s[n],10)));this.distanceUnits={KILOMETERS:"KILOMETERS",METERS:"METERS",LEAGUES:"LEAGUES",MILES:"MILES",YARDS:"YARDS",FEET:"FEET",INCHES:"INCHES",NAUTICAL_MILES:"NAUTICAL_MILES",SHEPPEYS:"SHEPPEYS"},this.FLEXIBLE_DISTANCE_PRECISION=-1,this.coordFormats={DMS:"DMS",DM:"DM",DD:"DD",D:"D"},this.settings=M({distanceUnits:this.distanceUnits.METER,distancePrecision:this.FLEXIBLE_DISTANCE_PRECISION,coordsFormat:this.coordFormats.D,coordsPrecision:6},s),this.toRad=function(t){return t*Math.PI/180},this.toDeg=function(t){return 180*t/Math.PI},this.isPlainObject=function(t){return"object"===(void 0===t?"undefined":p(t))&&t.constructor===Object},this.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},this.RADIUS_MEAN=6371e3,this.RADIUS_EQUILATERAL=6378100,this.RADIUS_POLAR=6356800};return S.prototype=M({},S.prototype,m),S});
//# sourceMappingURL=dist/geo.min.map